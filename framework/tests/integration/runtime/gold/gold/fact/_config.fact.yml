---
# yaml-language-server: $schema=../../../job-schema.json
- job:
    step: gold
    topic: fact
    item: udf
    tags: [test]
    options:
      mode: complete
- job:
    step: gold
    topic: fact
    item: manual
    tags: [test]
    options:
      type: manual
      mode: complete
- job:
    step: gold
    topic: fact
    item: notebook
    tags: [test]
    options:
      mode: complete
      notebook: true
- job:
    step: gold
    topic: fact
    item: dependency_sql
    options:
      mode: complete
- job:
    step: gold
    topic: fact
    item: dependency_notebook
    tags: [test]
    options:
      mode: complete
      notebook: true
- job:
    step: gold
    topic: fact
    item: memory
    tags: [test]
    options:
      mode: memory
- job:
    step: gold
    topic: fact
    item: option
    options:
      mode: complete
    table_options:
      identity: true
      liquid_clustering: true
      cluster_by: [monarch]
      properties:
        country: Belgium
      comment: Strength lies in unity
    spark_options:
      sql:
        spark.databricks.delta.properties.defaults.autoOptimize.optimizeWrite: false
        spark.databricks.delta.properties.defaults.enableChangeDataFeed: true
- job:
    step: gold
    topic: fact
    item: order_duplicate
    tags: [test]
    options:
      mode: complete
- job:
    step: gold
    topic: fact
    item: deduplicate
    tags: [test]
    options:
      mode: complete
      deduplicate: true
- job:
    step: gold
    topic: fact
    item: overwrite
    tags: [test]
    options:
      mode: complete
- job:
    step: gold
    topic: fact
    item: append
    tags: [test]
    options:
      mode: append
- job:
    step: gold
    topic: fact
    item: optimize_vacuum
    options:
      mode: complete
      optimize: true
      vacuum: true
- job:
    step: gold
    topic: fact
    item: no_drop
    options:
      mode: memory
      no_drop: true
- job:
    step: gold
    topic: fact
    item: masker_and_commenter
    options:
      mode: complete
    table_options:
      masks:
        dummy: "mask_dummy"
      comments:
        dummy: "This is a dummy mask"
        less_dummy: "This is a less dummy mask"
        dummier: "This is a dummier mask"
- job:
    step: gold
    topic: fact
    item: primary_key
    options:
      mode: complete
      primary_keys:
        pk_dummy: [dummy, less_dummy, dummier]
- job:
    step: gold
    topic: fact
    item: foreign_key
    options:
      mode: complete
    table_options:
      primary_keys:
        pk_dummy: [dummy]
      foreign_keys:
        fk_dummy: 
          keys: [dummy, less_dummy, dummier]
          parent: gold.fact_primary_key